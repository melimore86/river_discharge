{
    "collab_server" : "",
    "contents" : "library(shiny)\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(gridExtra)\nlibrary(shinythemes)\nlibrary(ggplot2)\nlibrary(scales)\nlibrary(leaflet)\nlibrary(rsconnect)\nlibrary(lubridate)\nlibrary(dplyr)\nlibrary(zoo)\nlibrary(waterData)\nlibrary(marelac)\n\n\n####Data\n###Sensor Data\n\nLC_WQ1 <- read.csv(\"data/LC_WQ1_All_Days_R.csv\", header= T)\nLC_WQ2 <- read.csv(\"data/LC_WQ2_All_Days_R.csv\", header= T)\nLC_WQ3 <- read.csv(\"data/LC_WQ3_All_Days_R.csv\", header= T)\nLC_WQ4 <- read.csv(\"data/LC_WQ4_All_Days_R.csv\", header= T)\nLC_WQ5 <- read.csv(\"data/LC_WQ5_All_Days_R.csv\", header= T)\nLC_WQ6 <- read.csv(\"data/LC_WQ6_All_Days_R.csv\", header= T)\nLC_WQ7 <- read.csv(\"data/LC_WQ7_All_Days_R.csv\", header= T)\nLC_WQ8 <- read.csv(\"data/LC_WQ8_All_Days_R.csv\", header= T)\nLC_WQ9 <- read.csv(\"data/LC_WQ9_All_Days_R.csv\", header= T)\n\ncolnames(LC_WQ1) <- c(\"Date\", \"Sound/Pressure\", \"Temperature\", \"Conductivity\")\ncolnames(LC_WQ3) <- c(\"Date\", \"Sound/Pressure\", \"Temperature\", \"Conductivity\")\ncolnames(LC_WQ2) <- c(\"Date\", \"Temperature\", \"Salinity\", \"Conductivity\", \"Sound/Pressure\")\ncolnames(LC_WQ4) <- c(\"Date\", \"Temperature\", \"Salinity\", \"Conductivity\", \"Sound/Pressure\")\ncolnames(LC_WQ5) <- c(\"Date\", \"Temperature\", \"Salinity\", \"Conductivity\", \"Sound/Pressure\")\ncolnames(LC_WQ6) <- c(\"Date\", \"Temperature\", \"Salinity\", \"Conductivity\", \"Sound/Pressure\")\ncolnames(LC_WQ7) <- c(\"Date\", \"Temperature\", \"Salinity\", \"Conductivity\", \"Sound/Pressure\")\ncolnames(LC_WQ8) <- c(\"Date\", \"Temperature\", \"Salinity\", \"Conductivity\", \"Sound/Pressure\")\ncolnames(LC_WQ9) <- c(\"Date\", \"Temperature\", \"Salinity\", \"Conductivity\", \"Sound/Pressure\")\n\nLC_WQ1$Date <- as.POSIXct(as.Date(LC_WQ1$Date,origin= \"1899-12-30\"))\nLC_WQ2$Date <- as.POSIXct(as.Date(LC_WQ2$Date,origin= \"1899-12-30\"))\nLC_WQ3$Date <- as.POSIXct(as.Date(LC_WQ3$Date,origin= \"1899-12-30\"))\nLC_WQ4$Date <- as.POSIXct(as.Date(LC_WQ4$Date,origin= \"1899-12-30\"))\nLC_WQ5$Date <- as.POSIXct(as.Date(LC_WQ5$Date,origin= \"1899-12-30\"))\nLC_WQ6$Date <- as.POSIXct(as.Date(LC_WQ6$Date,origin= \"1899-12-30\"))\nLC_WQ7$Date <- as.POSIXct(as.Date(LC_WQ7$Date,origin= \"1899-12-30\"))\nLC_WQ8$Date <- as.POSIXct(as.Date(LC_WQ8$Date,origin= \"1899-12-30\"))\nLC_WQ9$Date <- as.POSIXct(as.Date(LC_WQ9$Date,origin= \"1899-12-30\"))\n\nstandard= 42.914\n\nLC_WQ1$Salinity <- convert_RtoS(LC_WQ1$Conductivity/standard, \n                                t= LC_WQ1$Temperature, p= 0)\nLC_WQ2$Salinity <- convert_RtoS(LC_WQ2$Conductivity/standard, \n                                t= LC_WQ2$Temperature, p=0)\nLC_WQ3$Salinity <- convert_RtoS(LC_WQ3$Conductivity/standard, \n                                t= LC_WQ3$Temperature, p= 0)\nLC_WQ4$Salinity <- convert_RtoS(LC_WQ4$Conductivity/standard, \n                                t= LC_WQ4$Temperature, p=0)\nLC_WQ5$Salinity <- convert_RtoS(LC_WQ5$Conductivity/standard, \n                                t= LC_WQ5$Temperature, p=0)\nLC_WQ6$Salinity <- convert_RtoS(LC_WQ6$Conductivity/standard, \n                                t= LC_WQ6$Temperature, p=0)\nLC_WQ7$Salinity <- convert_RtoS(LC_WQ7$Conductivity/standard, \n                                t= LC_WQ7$Temperature, p=0)\nLC_WQ8$Salinity <- convert_RtoS(LC_WQ8$Conductivity/standard, \n                                t= LC_WQ8$Temperature, p=0)\nLC_WQ9$Salinity <- convert_RtoS(LC_WQ9$Conductivity/standard, \n                                t= LC_WQ9$Temperature, p=0)\n\nLC_WQ1$Site<-(LC_WQ1$Site=\"1\")\nLC_WQ2$Site<-(LC_WQ2$Site=\"2\")\nLC_WQ3$Site<-(LC_WQ3$Site=\"3\")\nLC_WQ4$Site<-(LC_WQ4$Site=\"4\")\nLC_WQ5$Site<-(LC_WQ5$Site=\"5\")\nLC_WQ6$Site<-(LC_WQ6$Site=\"6\")\nLC_WQ7$Site<-(LC_WQ7$Site=\"7\")\nLC_WQ8$Site<-(LC_WQ8$Site=\"8\")\nLC_WQ9$Site<-(LC_WQ9$Site=\"9\")\n\nsensor<- rbind (LC_WQ1, LC_WQ2, LC_WQ3, LC_WQ4, LC_WQ5, LC_WQ6, LC_WQ7, LC_WQ8, LC_WQ9)\n\n\n###Lakewatch Data\nlab <- read.csv(\"data/discrete_measurement.csv\", header= T)\n\ncolnames(lab) <- c(\"Site\", \"Date\", \"Time\", \"Sun_code\", \"Phosphorus\", \"Nitrogen\", \"Chlorophyll\", \"Secchi\", \"Color\", \"DO\", \"Temperature\",\"Conductivity\", \"Salinity\", \"Depth\", \"Sensor_Type\")\n\n#lab$Date<- paste(lab$oldDate, lab$Time)\n#lab$Date <- with(lab, as.POSIXct(paste(lab$oldDate, lab$Time), format=\"%Y-%m-%d %H:%M\"))\n#lab$Date <- as.POSIXct(paste(lab$Date, lab$Time), format=\"%Y-%m-%d %H:%M\")\n\nlab$Secchi<- paste(lab$Depth,lab$Secchi)\n\nlab$Secchi<-as.numeric(gsub('NA','',lab$Secchi))\n\nlab$Date <- as.POSIXct(as.Date(lab$Date,origin= \"1899-12-30\"))\n\n#lab$Date <- as.Date(lab$Date,format=\"%Y-%m-%d %H:%M\")\n#lab$Date <- as.Date(lab$Date, \"%m/%d/%Y\")\n#lab$allconduct<-NA\n#lab$allconduct<-paste(lab$SpecificConductancemilli,lab$SpecificConductancemicro)\n#lab$allconduct<-as.numeric(gsub('NA','',lab$allconduct))\n\nlab$Secchi<- (lab$Secchi/ 3.28)\n\n\n#### River Discharge Data\n#station = '02323500'   \n\n#stinfo  = siteInfo(station)\n#dis   = importDVs(staid=station,code='00060',stat='00003', sdate= \"1950-01-01\") \n#dis$year    = as.numeric(strftime(dis$dates,format=\"%Y\"))\n#dis$month   = as.numeric(strftime(dis$dates,format=\"%m\")) \n\n#colnames(dis) <- c(\"StaID\", \"Discharge\", \"Date\", \"QualCode\", \"Year\", \"Month\")\n\n#dis$Date <- as.POSIXct(as.Date(dis$Date))\n\n#dis$Month <- month(dis$Date, label=TRUE)\n#dis$Month2 <- month(dis$Date, label=FALSE)\n\n\n#dis_mean_year<-  aggregate( Discharge ~ Year, dis, mean )\n#dis_mean_month<-  aggregate( Discharge ~ Month, dis, mean )\n\n\n####Joining \n\n##Need to convert the site into numeric for both data.frames\n#sensor$Site<- as.numeric(sensor$Site)\n#lab$Site<- as.numeric(lab$Site)\n\n#dat <- full_join(sensor, lab, by = c(\"Site\", \"Date\",\"Conductivity\", \"Salinity\", \"Temperature\"))\n\n#dat$Date <- as.POSIXct(as.Date(dat$Date,origin= \"1899-12-30\"))\n\n#write.csv(dat, file = \"dat.csv\")\n#write.csv(dis, file= \"dis.csv\")\n\n#dat2<- full_join(dis, dat, by= (\"Date\"))\n\n#dat2 <- dat2%>% \n#  select(Site, Date, Salinity, Temperature, Phosphorus, Nitrogen, Color, Secchi, Discharge) %#>%\n#  separate(Date, c(\"Date\", \"Time\"), sep = \" \") %>% \n#  mutate(Date = ymd(Date),\n         #Site = paste(\"Site\", Site))\n\n#dat2$Date <- as.POSIXct(as.Date(dat2$Date,origin= \"1899-12-30\"))\n",
    "created" : 1527090802493.000,
    "dirty" : false,
    "encoding" : "ISO8859-1",
    "folds" : "",
    "hash" : "984837541",
    "id" : "4B36488",
    "lastKnownWriteTime" : 1527093429,
    "last_content_update" : 1527093429,
    "path" : "T:/Oyster Project/mels_git/mels-shiny/data_script.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}